"use strict";var _createClass=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}define(function(){return function(){function t(e){_classCallCheck(this,t),this.urls=e,this.options={credentials:"include",headers:{"Content-Type":"application/json",X_REQUESTED_WITH:"XMLHttpRequest"}}}return _createClass(t,[{key:"token",value:function(){var e=this.options;return e.method="POST",fetch("/rest/V1/test/token",e).then(function(e){return e.json()})}},{key:"test",value:function(e,t){var n=document.body.className;return fetch("/rest/V1/test/"+t+"/"+e+"/?body_classes="+n,this.options).then(function(e){return e.json()})}},{key:"newTest",value:function(e,t){var n=this.options;return n.method="POST",fetch("/rest/V1/test/"+t+"/"+e,n).then(function(e){return e.json()})}},{key:"answer",value:function(e,t,n,o){var s=this.options;return s.method="POST",s.body=JSON.stringify({question_id:n,answer_ids:o}),fetch("/rest/V1/test/answer/"+t+"/"+e,s).then(function(e){return e.json()})}},{key:"survey",value:function(e,t,n){var o=this.options;return o.method="POST",o.body=JSON.stringify({answers:n}),fetch("/rest/V1/test/survey/"+e+"/"+t,o).then(function(e){return e.json()})}},{key:"finish",value:function(e,t){var n=this.options;return n.method="POST",n.body=JSON.stringify({bodyClasses:document.body.className}),fetch("/rest/V1/test/finish/"+e+"/"+t,n).then(function(e){return e.json()})}},{key:"needsToLogin",value:function(e){var t=this.options;return t.method="POST",t.body=JSON.stringify({email:e}),fetch("/rest/V1/needsPassword/",t).then(function(e){return e.text()}).then(function(e){return"true"===e})}},{key:"register",value:function(e,t,n,o){var s=this.options;return s.method="POST",s.body=JSON.stringify({customer:{email:e,firstname:n,lastname:o},password:t}),fetch("/rest/V1/customers",s).then(function(e){return e.json()})}},{key:"purchase",value:function(e,t,n,o,s,r,i,u){var a=this.options;return a.method="POST",a.body=JSON.stringify({stripe_token:n,email:o,name:s,postal_code:r,currency:i,choice:u,bodyClasses:document.body.className}),fetch("/rest/V1/test/purchase/"+e+"/"+t,a).then(function(e){return e.json()})}},{key:"email",value:function(e,t,n,o){var s=this.options;return s.method="POST",s.body=JSON.stringify({email:n,name:o}),fetch("/rest/V1/test/email/"+e+"/"+t,s).then(function(e){return e.json()})}},{key:"login",value:function(e,t,n){var o=this.options;return o.method="POST",o.headers["Content-Type"]="application/x-www-form-urlencoded",o.body="token="+encodeURIComponent(e)+"&username="+encodeURIComponent(t)+"&password="+encodeURIComponent(n),fetch("/test/login/",o).then(function(e){return e.json()})}}]),t}()});